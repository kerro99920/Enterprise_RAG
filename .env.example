# 企业级 RAG 系统 - 环境变量配置
# ========================================
#
# 📚 使用说明：
# 1. 复制此文件为 .env: cp .env.example .env
# 2. 根据实际情况修改配置值
# 3. 不要将 .env 文件提交到版本控制
#
# ========================================

# =========================================
# 应用基础配置
# =========================================

# 应用名称
APP_NAME=Enterprise RAG System

# 应用版本
APP_VERSION=1.0.0

# API 路由前缀
API_PREFIX=/api/v1

# 调试模式（开发: true, 生产: false）
DEBUG=false

# 运行环境（development / production）
ENVIRONMENT=production

# =========================================
# 服务器配置
# =========================================

# 服务绑定地址
HOST=0.0.0.0

# 服务端口
PORT=8000

# Worker 进程数（生产环境建议 CPU 核心数 * 2 + 1）
WORKERS=4

# =========================================
# PostgreSQL 数据库配置
# =========================================

# 数据库主机地址
POSTGRES_HOST=localhost

# 数据库端口
POSTGRES_PORT=5432

# 数据库用户名
POSTGRES_USER=rag_user

# 数据库密码（请修改为强密码）
POSTGRES_PASSWORD=your_secure_password_here

# 数据库名称
POSTGRES_DB=enterprise_rag

# =========================================
# Milvus 向量数据库配置
# =========================================

# Milvus 主机地址
MILVUS_HOST=localhost

# Milvus 端口
MILVUS_PORT=19530

# Milvus 用户名（如果启用了认证）
MILVUS_USER=

# Milvus 密码（如果启用了认证）
MILVUS_PASSWORD=

# --- 向量库集合名称 ---
MILVUS_COLLECTION_STANDARD=rag_standards
MILVUS_COLLECTION_PROJECT=rag_projects
MILVUS_COLLECTION_CONTRACT=rag_contracts

# 向量维度（取决于 Embedding 模型）
# - BGE-large-zh: 1024
# - BGE-base-zh: 768
# - text2vec-base-chinese: 768
VECTOR_DIM=1024

# 向量索引类型（IVF_FLAT / IVF_SQ8 / HNSW）
MILVUS_INDEX_TYPE=IVF_FLAT

# 相似度度量方式（IP / L2 / COSINE）
MILVUS_METRIC_TYPE=IP

# =========================================
# Redis 缓存配置
# =========================================

# Redis 主机地址
REDIS_HOST=localhost

# Redis 端口
REDIS_PORT=6379

# Redis 密码（如果有）
REDIS_PASSWORD=

# Redis 数据库索引
REDIS_DB=0

# 缓存过期时间（秒）- 默认 6 小时
REDIS_CACHE_TTL=21600

# =========================================
# Neo4j 图数据库配置
# =========================================

# Neo4j 连接 URI
# - 本地: bolt://localhost:7687
# - Docker: bolt://neo4j:7687
# - Aura云: neo4j+s://xxx.databases.neo4j.io
NEO4J_URI=bolt://localhost:7687

# Neo4j 用户名
NEO4J_USER=neo4j

# Neo4j 密码（请修改为实际密码）
NEO4J_PASSWORD=your_neo4j_password_here

# Neo4j 数据库名（默认为 neo4j）
NEO4J_DATABASE=neo4j

# 连接池大小
NEO4J_MAX_CONNECTION_POOL_SIZE=50

# 连接超时时间（秒）
NEO4J_CONNECTION_TIMEOUT=30

# =========================================
# Embedding 模型配置
# =========================================

# Embedding 模型名称
# 推荐中文模型：
# - BAAI/bge-large-zh-v1.5（最佳效果）
# - BAAI/bge-base-zh-v1.5（平衡速度和效果）
# - shibing624/text2vec-base-chinese（轻量级）
EMBEDDING_MODEL_NAME=BAAI/bge-large-zh-v1.5

# 本地模型路径（可选，如果已下载模型到本地）
EMBEDDING_MODEL_PATH=

# 向量化批处理大小
EMBEDDING_BATCH_SIZE=32

# 最大文本长度
EMBEDDING_MAX_LENGTH=512

# =========================================
# LLM 大模型配置
# =========================================

# LLM API 密钥
# - OpenAI: sk-xxx
# - 通义千问: sk-xxx
# - 智谱 GLM: xxx
OPENAI_API_KEY=your_api_key_here

# LLM API 基础 URL
# - OpenAI: https://api.openai.com/v1
# - 通义千问: https://dashscope.aliyuncs.com/compatible-mode/v1
# - 智谱 GLM: https://open.bigmodel.cn/api/paas/v4
# - Ollama 本地: http://localhost:11434/v1
# - vLLM 本地: http://localhost:8000/v1
OPENAI_API_BASE=https://api.openai.com/v1

# LLM 模型名称
# - OpenAI: gpt-3.5-turbo / gpt-4
# - 通义千问: qwen-plus / qwen-turbo
# - 智谱 GLM: glm-4 / glm-3-turbo
# - Ollama: llama2 / mistral
LLM_MODEL=gpt-3.5-turbo

# LLM 生成温度（0-1，越低越确定性）
LLM_TEMPERATURE=0.7

# LLM 最大生成 token 数
LLM_MAX_TOKENS=2048

# =========================================
# 文档处理配置
# =========================================

# 文本分块大小（字符数）
CHUNK_SIZE=512

# 文本块重叠大小
CHUNK_OVERLAP=50

# 是否启用 OCR
OCR_ENABLED=true

# OCR 语言（ch: 中文, en: 英文）
OCR_LANGUAGE=ch

# 支持的文件类型
SUPPORTED_FILE_TYPES=.pdf,.docx,.doc,.txt

# =========================================
# 混合检索配置
# =========================================

# BM25 关键词检索权重
BM25_WEIGHT=0.3

# 向量语义检索权重
VECTOR_WEIGHT=0.4

# Rerank 重排序权重
RERANK_WEIGHT=0.3

# 初始召回数量
INITIAL_RETRIEVAL_COUNT=100

# 重排序后保留数量
RERANK_TOP_K=20

# 最终返回数量
FINAL_TOP_K=5

# =========================================
# 日志配置
# =========================================

# 日志级别（DEBUG / INFO / WARNING / ERROR）
LOG_LEVEL=INFO

# 日志目录
LOG_DIR=logs

# 日志轮转大小
LOG_ROTATION=500 MB

# 日志保留时间
LOG_RETENTION=30 days

# =========================================
# 安全配置
# =========================================

# JWT 密钥（请修改为随机字符串）
JWT_SECRET_KEY=your_jwt_secret_key_here

# JWT 过期时间（小时）
JWT_EXPIRE_HOURS=24

# =========================================
# 其他配置
# =========================================

# 时区
TZ=Asia/Shanghai

# 语言
LANGUAGE=zh


# =========================================
# 💡 配置示例
# =========================================
#
# 示例 1: 使用 OpenAI
# OPENAI_API_KEY=sk-your-api-key
# OPENAI_API_BASE=https://api.openai.com/v1
# LLM_MODEL=gpt-3.5-turbo
#
# 示例 2: 使用通义千问
# OPENAI_API_KEY=sk-your-qwen-api-key
# OPENAI_API_BASE=https://dashscope.aliyuncs.com/compatible-mode/v1
# LLM_MODEL=qwen-plus
#
# 示例 3: 使用本地 Ollama
# OPENAI_API_KEY=ollama
# OPENAI_API_BASE=http://localhost:11434/v1
# LLM_MODEL=llama2
#
# 示例 4: 使用本地 vLLM
# OPENAI_API_KEY=vllm
# OPENAI_API_BASE=http://localhost:8000/v1
# LLM_MODEL=Qwen/Qwen2-7B-Instruct
